angular.module('kassa').controller('NavigationCtrl', [
  '$scope'
  '$location'
  ($scope, $location)->
    $scope.routes = <%=
      %w(buy products users).collect do |r|
        icon_class = case r
          when 'buy' then 'fa-shopping-cart'
          when 'products' then 'fa-beer'
          when 'users' then 'fa-group'
          end
        {href: r, name: I18n.t("navigation.title.#{r}"), iconClass: icon_class}
      end.to_json
    %>

    _ensureRootSlash = (route)->
      if route.charAt(0) == '/' then route else ('/' + route)

    $scope.isCurrent = (route)->
      _ensureRootSlash(route) == $location.path()
])